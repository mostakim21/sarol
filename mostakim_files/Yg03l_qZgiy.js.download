if (self.CavalryLogger) { CavalryLogger.start_js(["qb\/49"]); }

__d("ProfileCometProfilePictureMediaPickerPhoto_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureMediaPickerPhoto_media",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[a],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:"thumbnail_image",args:[a,{kind:"Literal",name:"sizing",value:"cover-fill-cropped"},{kind:"Literal",name:"width",value:105}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[b],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_profile_picture",storageKey:null}],type:"Photo",abstractKey:null}],type:"Media",abstractKey:"__isMedia"}}();e.exports=a}),null);
__d("ProfileCometProfilePictureEditStrings",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a=g._("Description");f.ADD_DESCRIPTION=a;b=g._("Add Frame");f.ADD_FRAME=b;c=g._("Add a Frame to Your Profile Picture");f.ADD_FRAME_TO_PROFILE=c;d=g._("Add Photo");f.ADD_PHOTO=d;e=g._("Cancel");f.CANCEL=e;a=g._("Change end time");f.CHANGE_EXPIRATION_TIME=a;b=g._("Change Photo");f.CHANGE_PHOTO=b;c=g._("Choose a Frame");f.CHOOSE_A_FRAME=c;d=g._("Update Profile Picture");f.DIALOG_TITLE=d;e=g._("Drag to Reposition");f.DRAG_INSTRUCTIONS=e;a=g._("Edit Thumbnail");f.EDIT_THUMBNAIL=a;b=g._("Edit Thumbnail");f.EDIT_THUMBNAIL_TITLE=b;c=g._("Keep as permanent picture");f.KEEP_TEMPORARY_PROFILE_PICTURE=c;d=g._("This Profile Is Locked");f.LOCKED_PROFILE=d;e=g._("Make Temporary");f.MAKE_TEMPORARY=e;a=g._("No results found.");f.NO_RESULTS=a;b=g._("Photo Albums");f.PHOTO_ALBUMS=b;c=g._("Preview");f.PREVIEW=c;d=g._("Your profile picture is public.");f.PRIVACY_DISCLAIMER=d;e=g._("Recent Photos");f.RECENT_PHOTOS=e;a=g._("Switch to previous picture now");f.REVERT_TEMPORARY_PROFILE_PICTURE=a;b=g._("Save");f.SAVE=b;c=g._("Search for themes, owner names and more.");f.SEARCH_FOR_FRAMES=c;d=g._("See More");f.SEE_MORE=d;e=g._("Select Photo");f.SELECT_PHOTO=e;a=g._("Your Profile Is Locked");f.SELF_LOCKED_PROFILE=a;b=g._("Custom");f.TEMPORARY_OPTION_CUSTOM=b;c=g._("Never");f.TEMPORARY_OPTION_NEVER=c;d=g._("1 Day");f.TEMPORARY_OPTION_ONE_DAY=d;e=g._("1 Hour");f.TEMPORARY_OPTION_ONE_HOUR=e;a=g._("1 Month");f.TEMPORARY_OPTION_ONE_MONTH=a;b=g._("1 Week");f.TEMPORARY_OPTION_ONE_WEEK=b;c=g._("Switch back to previous profile picture in");f.TEMPORARY_PROFILE_PIC_CONTROL=c;d=g._("Upload Photo");f.UPLOAD_PHOTO=d;e=g._("Use as Profile Picture");f.USE_AS_PROFILE_PICTURE=e;a=g._("Decrease Zoom");f.ZOOM_DECREASE=a;b=g._("Increase Zoom");f.ZOOM_INCREASE=b;c=g._("Zoom");f.ZOOM_SLIDER=c}),null);
__d("ProfileCometProfilePictureTemporaryOptions",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CUSTOM:-2,DAY:86400,HOUR:3600,MONTH:2592e3,PERMANENT:-1,WEEK:604800});e.exports=a}),null);
__d("ProfileCometExpirationTimeSelector.react",["fbt","CometCardedDialogLoadingState.react","CometSelect.react","CometTimestamp.react","JSResource","ProfileCometProfilePictureEditStrings","ProfileCometProfilePictureTemporaryOptions","React","useCometLazyDialog","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("JSResource")("ProfileCometExpirationTimeSelectorDialog.react").__setRef("ProfileCometExpirationTimeSelector.react"),j=[{label:(c=b("ProfileCometProfilePictureEditStrings")).TEMPORARY_OPTION_ONE_HOUR,value:(d=b("ProfileCometProfilePictureTemporaryOptions")).HOUR},{label:c.TEMPORARY_OPTION_ONE_DAY,value:d.DAY},{label:c.TEMPORARY_OPTION_ONE_WEEK,value:d.WEEK},{label:c.TEMPORARY_OPTION_ONE_MONTH,value:d.MONTH},{label:c.TEMPORARY_OPTION_NEVER,value:d.PERMANENT},{label:c.TEMPORARY_OPTION_CUSTOM,value:d.CUSTOM}],k=function(){return h.jsx(b("CometCardedDialogLoadingState.react"),{title:g._("Switch back to previous profile picture at")})};function a(a){var c=a.disabled;c=c===void 0?!1:c;var d=a.onChange;a=a.value;a=h.useState((a=a)!=null?a:b("ProfileCometProfilePictureTemporaryOptions").PERMANENT);var e=a[0],f=a[1];a=h.useState(null);var g=a[0],l=a[1];a=b("useServerTime")();a=b("CometTimestamp.react").getTimestamp(a,new Date((a=g)!=null?a:0));a=[g!=null?{label:a,value:g}:null].concat(j).filter(Boolean);var m=b("useCometLazyDialog")(i,k),n=m[0];h.useEffect(function(){g!=null?d(Math.ceil((g-Date.now())/1e3)):e===b("ProfileCometProfilePictureTemporaryOptions").PERMANENT?d(null):d(e)},[g,e,d]);return h.jsx(b("CometSelect.react"),{disabled:c,onChange:function(a){a===b("ProfileCometProfilePictureTemporaryOptions").CUSTOM?n({onSelect:function(a){return l(a.getTime())}}):(f(a),l(null))},options:a,selectedValue:(m=g)!=null?m:e,size:"full"})}}),null);
__d("ProfileCometProfilePictureEditDialogReducer",[],(function(a,b,c,d,e,f){"use strict";f.getInitialState=a;f.reducer=b;function a(){return{image:null,isUploading:!1,step:"PICKER"}}function b(a,b){switch(b.type){case"ADD_FRAME":return babelHelpers["extends"]({},a,{step:"FRAME"});case"SELECT_PHOTO":return babelHelpers["extends"]({},a,{image:b.image,step:"PREVIEW"});case"PREVIEW_CANCEL":return babelHelpers["extends"]({},a,{image:null,step:"PICKER"});case"UPLOAD_FAILED":return babelHelpers["extends"]({},a,{isUploading:!1});case"UPLOAD_STARTED":return babelHelpers["extends"]({},a,{isUploading:!0});case"UPLOAD_SUCCESS":return babelHelpers["extends"]({},a,{image:babelHelpers["extends"]({},b.image,{isUploaded:!0}),isUploading:!1,step:a.step==="FRAME"?a.step:"PREVIEW"});case"UPDATE_THUMBNAIL":return babelHelpers["extends"]({},a,{image:b.image,step:"THUMBNAIL"});default:return babelHelpers["extends"]({},a)}}}),null);
__d("ProfileCometProfilePictureEditDialogContext",["ProfileCometProfilePictureEditDialogReducer","React","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({dispatch:b("emptyFunction"),state:b("ProfileCometProfilePictureEditDialogReducer").getInitialState()});e.exports=c}),null);
__d("ProfileCometProfilePictureZoomCropImage.react",["ix","CometImage.react","ProfileCometProfilePictureEditStrings","React","TetraIcon.react","TetraText.react","clamp","fbicon","stylex","useGlobalEventListener"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function i(a,b,c){var d=(.5-a[0])*b[0]*c;a=(.5-a[1])*b[1]*c;return{transform:"translate3d("+d+"px, "+a+"px, 0) scale("+c+")"}}function j(a){switch(a){case"circle":return{WebkitMaskImage:"-webkit-radial-gradient(white, black)",borderRadius:"50%"};case"rect":default:return{}}}function k(a){return{height:a[1]+"px",width:a[0]+"px"}}function l(a,b){var c=-(b[0]-a[0])/2;b=-(b[1]-a[1])/2;return{transform:"translate("+c+"px, "+b+"px)"}}function m(a,c,d,e){var f=c[0]/2/(d[0]*e);c=c[1]/2/(d[1]*e);return[b("clamp")(a[0],f,1-f),b("clamp")(a[1],c,1-c)]}function a(a){var c=a.center,d=a.cropShape;d=d===void 0?"circle":d;var e=a.cropSize,f=a.disabled,n=f===void 0?!1:f,o=a.imageSize;f=a.imageSrc;var p=a.onMove;a=a.zoom;var q=a===void 0?1:a,r=h.useRef([0,0]),s=h.useRef([0,0]),t=h.useRef(1);a=h.useState(!1);var u=a[0],v=a[1];a=h.useState(!0);var w=a[0],x=a[1];a=h.useCallback(function(a){a.preventDefault()},[]);var y=h.useCallback(function(a){if(n)return;v(!0);x(!1);r.current=[a.clientX,a.clientY];s.current=c},[c,n]),z=h.useCallback(function(a){v(!1),a.stopPropagation()},[]),A=h.useCallback(function(a){if(!u)return;var b=a.clientX-r.current[0];a=a.clientY-r.current[1];b=[s.current[0]-b/(o[0]*t.current),s.current[1]-a/(o[1]*t.current)];p(m(b,e,o,t.current))},[e,o,u,p]);h.useEffect(function(){q!==t.current&&(t.current=q,p(m(c,e,o,q)))},[c,e,o,p,q]);b("useGlobalEventListener")("mousemove",u?A:null,{capture:!0});b("useGlobalEventListener")("mouseup",u?z:null,{capture:!0});return h.jsxs("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m g6srhlxm",children:[h.jsxs("div",{className:"ke6wolob rk01pc8j l9j0dhe7 f9o22wc5 ad2k81qe",style:k(e),children:[h.jsx("div",{className:"l9j0dhe7 stjgntxs ni8dbmo4",style:babelHelpers["extends"]({},j(d),k(e)),children:h.jsx("div",{className:"pmk7jnqg",style:l(e,o),children:h.jsx("div",{style:i(c,o,t.current),children:h.jsx(b("CometImage.react"),{src:f})})})}),h.jsx("div",{className:"kr520xx4 pmk7jnqg akz8cqyu soycq5t1",style:l(e,o),children:h.jsx("div",{className:"a7woen2v",onDragStart:a,onMouseDown:y,style:i(c,o,t.current),children:h.jsx(b("CometImage.react"),{src:f})})})]}),!n&&w&&h.jsxs("div",{className:"cj5g2342 adce92kx kfkz5moi pmk7jnqg cxgpxx05 tw6a2znq d1544ag0 sj5x9vvc j83agx80 l82x9zwi uo3d90p7 pw54ja7n ue3kfks5 ora8z2hr bp9cbjyn",children:[h.jsx("div",{className:"oi9244e8 j83agx80",children:h.jsx(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("697185"),20)})}),h.jsx(b("TetraText.react"),{color:"white",type:"headlineEmphasized4",children:b("ProfileCometProfilePictureEditStrings").DRAG_INSTRUCTIONS})]})]})}}),null);
__d("ProfileCometProfilePictureZoomCrop.react",["ProfileCometProfilePictureZoomControl.react","ProfileCometProfilePictureZoomCropImage.react","React","clamp","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={"default":{height:"cmsa8f9s",width:"f36cnskx"}},j=5,k=180;function l(a){return Number(a.toFixed(j))}function m(a,b){b=Math.max(a[0]/b[0],a[1]/b[1]);a=Math.max(Math.min(a[0]/k,a[1]/k),b);return[l(b),l(a)]}function n(a){return a[0]/a[1]===1}function a(a){var c=a.cropShape;c=c===void 0?"circle":c;var d=a.cropSize,e=a.disabled;e=e===void 0?!1:e;var f=a.imageSize,j=a.imageSrc,k=a.onChange;a=a.xstyle;var o=m(d,f),p=h.useState(o[0]),q=p[0],r=p[1];p=h.useState([.5,.5]);var s=p[0],t=p[1];p=!(q===o[0]&&n(f));var u=h.useCallback(function(a){t(a)},[]),v=h.useCallback(function(a){r(a)},[]);h.useEffect(function(){var a,c=d[1]/(f[1]*q),e=d[0]/(f[0]*q),g=s[0]-e/2,h=s[1]-c/2;c=l((a=b("clamp"))(c,0,1));e=l(a(e,0,1));k({height:c,width:e,x:l(a(g,0,1-e)),y:l(a(h,0,1-c))})},[s,d,f,k,q]);return h.jsxs("div",{children:[h.jsx("div",{className:(g||(g=b("stylex")))((a=a)!=null?a:i["default"]),children:h.jsx(b("ProfileCometProfilePictureZoomCropImage.react"),{center:s,cropShape:c,cropSize:d,disabled:e||!p,imageSize:f,imageSrc:j,onMove:u,zoom:q})}),h.jsx(b("ProfileCometProfilePictureZoomControl.react"),{disabled:e,max:o[1],min:o[0],onChange:v,step:.1,value:q})]})}}),null);
__d("ProfileCometProfilePictureEditPreview.react",["ix","fbt","BaseRow.react","BaseRowItem.react","CometCard.react","CometFormTextArea.react","CometProgressIndicator.react","CometRelay","CometRow.react","CometRowItem.react","ProfileCometExpirationTimeSelector.react","ProfileCometProfilePictureEditStrings","ProfileCometProfilePictureSetMutation","ProfileCometProfilePictureTemporaryOptions","ProfileCometProfilePictureZoomCrop.react","React","TetraButton.react","TetraIcon.react","TetraText.react","fbicon","gkx","logCometFunnelEvent","stylex","useIsMountedRef"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={cancelButton:{marginEnd:"cgat1ltu"},description:{paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a"},footerWithDivider:{alignItems:"bp9cbjyn",borderTop:"l6v480f0",display:"j83agx80",justifyContent:"bkfpd7mw",paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a"},privacyDisclaimer:{alignItems:"bp9cbjyn",display:"j83agx80",marginBottom:"sjgh65i0",marginEnd:"wkznzc2l",marginStart:"dhix69tm"},privacyIcon:{display:"j83agx80",marginEnd:"tvfksri0"},privacyText:{display:"j83agx80"},saveButton:{marginStart:"kkf49tns"},savingIndicator:{marginEnd:"cgat1ltu"},skipCroppingButton:{marginEnd:"tvfksri0"},skipCroppingMessage:{backgroundColor:"ora8z2hr",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",width:"k4urcfbm"},spacingBottom:{marginBottom:"sjgh65i0",marginEnd:"wkznzc2l",marginStart:"dhix69tm"},temporaryInput:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"i1fnvgqd",paddingBottom:"f10w8fjw",paddingEnd:"hv4rvrfc",paddingStart:"dati1w0a",paddingTop:"pybr56ya"},zoomCrop:{position:"l9j0dhe7"}},l=300;function a(a){var c=a.canMakeTemporary;c=c===void 0?!1:c;var d=a.canSkipCropping;d=d===void 0?!1:d;var e=a.onCancel,f=a.onSaveSuccess,m=a.photo,n=a.profileID,o=a.source,p=a.targetType;a=a.xstyle;var q=b("CometRelay").useRelayEnvironment(),r=j.useRef(null),s=j.useState(""),t=s[0],u=s[1],v=b("useIsMountedRef")();s=j.useState(!1);var w=s[0],x=s[1];s=j.useState(!1);var y=s[0],z=s[1];s=j.useState(!1);var A=s[0],B=s[1];s=j.useState(b("ProfileCometProfilePictureTemporaryOptions").WEEK);var C=s[0];s=s[1];d=d&&b("gkx")("877515");var D=j.useCallback(function(){x(!0),b("ProfileCometProfilePictureSetMutation").setProfilePicture(q,{caption:t,expirationTime:A?C:null,photoID:m.id,profileID:n,scaledCropRect:r.current||void 0,skipCropping:y,source:o||void 0,targetType:p},{onCompleted:function(){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][save success]"),f()},onError:function(a){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][save error]",{actionPayload:{error:a.description}}),v.current&&x(!1)}})},[q,t,A,C,m.id,n,y,o,p,f,v]),E=j.useCallback(function(a){r.current=a},[]),F=j.useCallback(function(a){u(a)},[]);b("logCometFunnelEvent").useLogCometFunnelImpressionEvent("ProfileCometTimelineWebFunnelDefinition","[impression][profile picture edit dialog][edit thumbnail]");E=j.jsx(b("ProfileCometProfilePictureZoomCrop.react"),{cropSize:[l,l],disabled:w,imageSize:[m.width,m.height],imageSrc:m.uri,onChange:E,xstyle:a});return j.jsxs("div",{children:[!m.isProfilePicture&&j.jsx("div",{className:(i||(i=b("stylex")))(k.description),children:j.jsx(b("CometFormTextArea.react"),{label:b("ProfileCometProfilePictureEditStrings").ADD_DESCRIPTION,minRows:2,onValueChange:F,value:t})}),y?j.jsxs("div",{className:(i||(i=b("stylex")))(k.zoomCrop),children:[E,j.jsx("div",{className:(i||(i=b("stylex")))(k.skipCroppingMessage),children:j.jsxs(b("CometRow.react"),{align:"center",expanding:!0,paddingHorizontal:0,paddingVertical:12,children:[j.jsx(b("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("479180"),20)})}),j.jsx(b("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(b("TetraText.react"),{color:"white",type:"meta3",children:h._("The entire photo will be saved as your profile picture. Reposition the photo to set the thumbnail.")})})]})})]}):E,(d||c)&&!m.isProfilePicture&&j.jsxs(b("BaseRow.react"),{align:"center",xstyle:k.spacingBottom,children:[d&&j.jsx(b("BaseRowItem.react"),{xstyle:k.skipCroppingButton,children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("482559"),16),label:h._("Skip Cropping"),onPress:function(){return z(!y)},reduceEmphasis:y,type:y?"primary":"secondary"})}),c&&j.jsx(b("BaseRowItem.react"),{children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("478793"),16),label:b("ProfileCometProfilePictureEditStrings").MAKE_TEMPORARY,onPress:function(){return B(!A)},reduceEmphasis:A,type:A?"primary":"secondary"})})]}),A&&j.jsx(b("BaseRow.react"),{xstyle:k.spacingBottom,children:j.jsx(b("BaseRowItem.react"),{expanding:!0,children:j.jsx(b("CometCard.react"),{border:"solid",dropShadow:1,children:j.jsxs("div",{className:(i||(i=b("stylex")))(k.temporaryInput),children:[j.jsx(b("TetraText.react"),{type:"body3",children:b("ProfileCometProfilePictureEditStrings").TEMPORARY_PROFILE_PIC_CONTROL}),j.jsx(b("ProfileCometExpirationTimeSelector.react"),{disabled:w,onChange:s,value:C})]})})})}),b("gkx")("1224637")?null:j.jsxs("div",{className:(i||(i=b("stylex")))(k.privacyDisclaimer),children:[j.jsx("div",{className:(i||(i=b("stylex")))(k.privacyIcon),children:j.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("fbicon")._(g("560120"),20)})}),j.jsx("div",{className:(i||(i=b("stylex")))(k.privacyText),children:j.jsx(b("TetraText.react"),{color:"secondary",type:"body2",children:b("ProfileCometProfilePictureEditStrings").PRIVACY_DISCLAIMER})})]}),j.jsxs("div",{className:(i||(i=b("stylex")))(k.footerWithDivider),children:[j.jsx("div",{className:i(k.cancelButton),children:w?j.jsx("div",{className:(i||(i=b("stylex")))(k.savingIndicator),children:j.jsx(b("CometProgressIndicator.react"),{})}):j.jsx(b("TetraButton.react"),{label:b("ProfileCometProfilePictureEditStrings").CANCEL,onPress:e,reduceEmphasis:!0,type:"secondary"})}),j.jsx("div",{className:i(k.saveButton),children:j.jsx(b("TetraButton.react"),{disabled:w,label:b("ProfileCometProfilePictureEditStrings").SAVE,onPress:D,padding:"wide",testid:void 0})})]})]})}}),null);
__d("ProfileCometProfilePictureEditPreviewDialog.react",["Actor","CometCardedDialog.react","ProfileCometProfilePictureEditPreview.react","ProfileCometProfilePictureEditStrings","React","useIsMountedRef"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.onClose,d=a.photo;a=a.source;var e=b("Actor").useActor();e=e[0];var f=b("useIsMountedRef")(),h=g.useCallback(function(){f.current&&c()},[f,c]);return g.jsx(b("CometCardedDialog.react"),{onClose:c,size:"medium",title:b("ProfileCometProfilePictureEditStrings").DIALOG_TITLE,withCloseButton:!0,children:g.jsx(b("ProfileCometProfilePictureEditPreview.react"),{canMakeTemporary:!0,canSkipCropping:!0,onCancel:c,onSaveSuccess:h,photo:d,profileID:e,source:a,targetType:"profile"})})}}),null);
__d("ProfileCometProfilePictureMediaPickerPhoto.react",["CometAspectRatioContainer.react","CometBackgroundImage.react","CometPressable.react","CometRelay","ProfileCometProfilePictureEditDialogContext","ProfileCometProfilePictureEditStrings","React","getRoundedCorners","stylex","ProfileCometProfilePictureMediaPickerPhoto_media.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j=b("getRoundedCorners").CORNERS,k=b("getRoundedCorners").hasCorner,l={borderBottomEndRadius:{borderBottomEndRadius:"uo3d90p7"},borderBottomStartRadius:{borderBottomStartRadius:"l82x9zwi"},borderTopEndRadius:{borderTopEndRadius:"pw54ja7n"},borderTopStartRadius:{borderTopStartRadius:"ue3kfks5"},image:{width:"k4urcfbm"},imageBorder:{bottom:"i09qtzwb",boxSizing:"rq0escxv",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",boxShadow:"oaz4zybt"},root:{height:"datstx6m",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7",width:"k4urcfbm"}};function a(a){var c=a.media,d=a.roundCorner,e=b("CometRelay").useFragment(g!==void 0?g:g=b("ProfileCometProfilePictureMediaPickerPhoto_media.graphql"),c);c=((a=e.thumbnail_image)==null?void 0:a.uri)||"";var f=e.id||"",m=((a=e.image)==null?void 0:a.height)||0,n=((a=e.image)==null?void 0:a.uri)||"",o=((a=e.image)==null?void 0:a.width)||0;a=(a=e==null?void 0:e.accessibility_caption)!=null?a:b("ProfileCometProfilePictureEditStrings").SELECT_PHOTO;var p=i.useContext(b("ProfileCometProfilePictureEditDialogContext")),q=p.dispatch;p=p.state;var r=i.useCallback(function(){return q({image:{height:m,id:f,isProfilePicture:e.is_profile_picture||!1,uri:n,width:o},type:"SELECT_PHOTO"})},[q,m,f,n,o,e.is_profile_picture]),s=[j.BOTTOM_END,j.BOTTOM_START,j.TOP_END,j.TOP_START].map(function(a){return k(d,a)}),t=s[0],u=s[1],v=s[2];s=s[3];return i.jsx(b("CometPressable.react"),{disabled:p.isUploading,onPress:r,xstyle:[l.root,t&&l.borderBottomEndRadius,u&&l.borderBottomStartRadius,v&&l.borderTopEndRadius,s&&l.borderTopStartRadius],children:i.jsxs(b("CometAspectRatioContainer.react"),{aspectRatio:1,xstyle:l.image,children:[i.jsx(b("CometBackgroundImage.react"),{alt:a,src:c}),i.jsx("div",{className:(h||(h=b("stylex")))(t?l.borderBottomEndRadius:null,u?l.borderBottomStartRadius:null,v?l.borderTopEndRadius:null,s?l.borderTopStartRadius:null,l.imageBorder)})]})})}}),null);
__d("ProfileCometProfilePictureMediaUploadAction.react",["CometFileSelector.react","ProfileCometProfilePictureEditDialogContext","React","XProfilePicUploadAsyncController","logCometFunnelEvent","useCometAlertDialog","useProfileCometPhotoUploader"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.profileID;a=g.useContext(b("ProfileCometProfilePictureEditDialogContext"));var e=a.dispatch;a=b("useCometAlertDialog")();var f=a[0],h=b("useProfileCometPhotoUploader")(),i=g.useCallback(function(a){var c;b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][upload success]");e({image:{height:(c=a.imageHeight)!=null?c:0,id:a.fbid,isProfilePicture:!1,uri:(c=a.imageURI)!=null?c:"",width:(c=a.imageWidth)!=null?c:0},type:"UPLOAD_SUCCESS"})},[e]),j=g.useCallback(function(a){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][upload error]",{actionPayload:{error:a.description}}),e({type:"UPLOAD_FAILED"}),f({body:a.description,title:a.summary})},[e,f]);a=g.useCallback(function(a){if(!a.length)return;e({type:"UPLOAD_STARTED"});var c=b("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",d).setEnum("photo_source",57).getURI();h(c,a[0],{onFailed:j,onSucceeded:i})},[e,j,i,d,h]);return g.jsx(b("CometFileSelector.react"),{accept:["image/*","image/heif","image/heic"],onFilesSelected:a,children:function(a){return c(a)}})}}),null);